#:kivy 1.10.1

<Pay>:
    id: screen
    qrnode: qrnode
    pay_channel_label: pay_channel_label
    pay_channel_image: pay_channel_image

    BackArrow:
        on_press: root.manager.current = 'payselector'

    Label:
        size_hint: None, None
        text: 'Scan & Pay'
        color: .4, .4, .4, 1
        font_size: 24
        center_x: self.parent.width / 2
        top: self.parent.height - 26

    Widget:
        size_hint: None, None
        size: 200, 200
        pos: 140, 140
        canvas:
            Color:
                rgba: .9, .9, .9, 1
            Line:
                rectangle: (140, 140, 200, 200)
        Image:
            id: pay_channel_image
            size_hint: None, None
            size: 180, 180
            # source: screen.pay_channel_logo
            center: self.parent.center
    Label:
        id: pay_channel_label
        size_hint: None, None
        size: 200, 20
        # text: screen.pay_channel_name
        color: .42, .42, .42, 1
        font_size: 18
        line_height: 1
        top: 130
        center_x: 240

    AsyncImage:
        id: qrnode
        source: screen.qrcode_url
        size_hint: None, None,
        size: 240, 240
        pos: 410, 115
        allow_stretch: True
        canvas.before:
            Color:
                rgba: .9, .9, .9, 1
            Line:
                rectangle: self.x - 5, self.y - 5, 250, 250

    Label:
        markup: True
        size_hint: None, None
        size: self.texture_size
        text: "The QR Code will refresh in [color=ff7052]" + str(screen.count_down_num) + "s[/color]"
        font_size: 15
        color: .47, .48, .57, 1
        center_x: self.parent.width / 2
        top: 50
